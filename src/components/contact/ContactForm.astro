---
import Button from '../common/Button.astro';
---

<form class="contact-form" id="contactForm">
  <div class="form-group">
    <label for="name">Name *</label>
    <input type="text" id="name" name="name" required />
  </div>

  <div class="form-group">
    <label for="email">Email *</label>
    <input type="email" id="email" name="email" required />
  </div>

  <div class="form-group">
    <label for="phone">Phone</label>
    <input type="tel" id="phone" name="phone" />
  </div>

  <div class="form-group">
    <label for="message">Message *</label>
    <textarea id="message" name="message" rows="5" required></textarea>
  </div>

  <div class="form-actions">
    <Button type="submit" variant="primary">Send Message</Button>
  </div>

  <div class="form-message" id="formMessage"></div>
</form>

<style>
  .contact-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    max-width: 600px;
    width: 100%;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  label {
    font-weight: 500;
    color: var(--text-primary);
    font-size: var(--text-base);
  }

  input,
  textarea {
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--text-base);
    font-family: inherit;
    background-color: var(--bg-white);
    color: var(--text-primary);
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  input:focus,
  textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(140, 171, 46, 0.1);
  }

  textarea {
    resize: vertical;
    min-height: 120px;
  }

  .form-actions {
    margin-top: var(--space-md);
  }

  .form-message {
    margin-top: var(--space-md);
    padding: var(--space-md);
    border-radius: var(--radius-sm);
    text-align: center;
    display: none;
  }

  .form-message.success {
    display: block;
    background-color: rgba(140, 171, 46, 0.1);
    color: var(--primary);
    border: 1px solid var(--primary);
  }

  .form-message.error {
    display: block;
    background-color: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid #ef4444;
  }

  @media (max-width: 768px) {
    input,
    textarea {
      font-size: 16px; /* Prevents zoom on iOS */
    }
  }
</style>

<script>
  const form = document.getElementById('contactForm');
  const formMessage = document.getElementById('formMessage');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(form);
    const data = Object.fromEntries(formData);
    
    // Reset message
    formMessage.textContent = '';
    formMessage.className = 'form-message';
    
    try {
      // For now, just simulate a successful submission
      // In production, you would send this to your backend
      console.log('Form data:', data);
      
      // Simulate API call delay
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Show success message
      formMessage.textContent = 'Thank you for your message! We\'ll get back to you soon.';
      formMessage.classList.add('success');
      
      // Reset form
      form.reset();
      
      // Scroll to message
      formMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
    } catch (error) {
      // Show error message
      formMessage.textContent = 'Sorry, there was an error sending your message. Please try again.';
      formMessage.classList.add('error');
    }
  });
</script>
