---
import Icon from '../common/Icon.astro';

export interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const navItems = [
  { label: 'Home', href: '/' },
  { label: 'Commercial Snow Removal', href: '/services/commercial-snow-removal' },
  { label: 'Landscaping', href: '/services/landscaping' },
  { label: 'Municipal Contracting', href: '/services/municipal-contracting' },
  { label: 'Ice Management', href: '/services/ice-management' },
  { label: 'Blog', href: '/blog' },
  { label: 'Contact', href: '/contact' }
];

const isActive = (href: string) => {
  if (href === '/') {
    return currentPath === href;
  }
  return currentPath.startsWith(href);
};

const phoneNumber = '612-655-0648';
const phoneLink = `tel:${phoneNumber.replace(/-/g, '')}`;
---

<nav class="nav" aria-label="Main navigation">
  <ul class="nav__list">
    {navItems.map((item) => (
      <li class="nav__item">
        <a 
          href={item.href} 
          class={`nav__link ${isActive(item.href) ? 'nav__link--active' : ''}`}
          aria-current={isActive(item.href) ? 'page' : undefined}
        >
          {item.label}
        </a>
      </li>
    ))}
    <li class="nav__item nav__item--phone">
      <a href={phoneLink} class="nav__phone-btn">
        <Icon name="phone" size={18} />
        <span>{phoneNumber}</span>
      </a>
    </li>
  </ul>
</nav>

<style>
  .nav {
    display: none;
  }
  
  @media (min-width: 1024px) {
    .nav {
      display: block;
    }
    
    .nav__list {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    
    .nav__item {
      margin: 0;
    }
    
    .nav__link {
      display: block;
      padding: var(--space-2) var(--space-3);
      font-family: var(--font-body);
      font-size: var(--text-sm);
      font-weight: 500;
      color: var(--neutral-dark);
      text-decoration: none;
      border-radius: var(--radius-md);
      transition: all var(--transition-fast);
      position: relative;
      white-space: nowrap;
    }
    
    .nav__link:hover {
      color: var(--primary);
      background-color: rgba(74, 144, 226, 0.1);
      text-decoration: none;
    }
    
    .nav__link--active {
      color: var(--primary);
      font-weight: 600;
    }
    
    .nav__link--active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: var(--space-4);
      right: var(--space-4);
      height: 3px;
      background-color: var(--primary);
      border-radius: var(--radius-sm);
    }
    
    /* Phone button */
    .nav__item--phone {
      margin-left: var(--space-4);
    }
    
    .nav__phone-btn {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      padding: var(--space-2) var(--space-3);
      background-color: var(--primary);
      color: var(--white);
      font-weight: 600;
      text-decoration: none;
      border-radius: var(--radius-full);
      transition: all var(--transition-fast);
      box-shadow: var(--shadow-sm);
    }
    
    .nav__phone-btn:hover {
      background-color: var(--white);
      color: var(--primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
      text-decoration: none;
    }
    
    .nav__phone-btn span {
      font-size: var(--text-sm);
    }
  }
  
  @media (min-width: 1280px) {
    .nav__link {
      font-size: var(--text-base);
      padding: var(--space-2) var(--space-4);
    }
    
    .nav__phone-btn {
      padding: var(--space-2) var(--space-4);
    }
    
    .nav__phone-btn span {
      font-size: var(--text-base);
    }
  }
</style>