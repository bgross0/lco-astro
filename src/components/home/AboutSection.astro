---
import { Image } from 'astro:assets';
import Button from '../common/Button.astro';
import Icon from '../common/Icon.astro';
import contentData from '../../content/homepage/content.json';

// Import about images from assets
import aboutImage1 from '../../assets/images/img_2486.jpg';
import aboutImage2 from '../../assets/images/loader-dumping-into-truck.jpg';

const { about } = contentData;

const aboutImages = [
  { src: aboutImage1, alt: about.images[0]?.alt || "Professional equipment fleet" },
  { src: aboutImage2, alt: about.images[1]?.alt || "Landscaping project showcase" }
];
---

<section class="about">
  <div class="container">
    <div class="about__grid">
      <div class="about__content">
        <h2 class="about__title">
          {about.title}
        </h2>

        {about.paragraphs.map((paragraph) => (
          <p class="about__text">
            {paragraph}
          </p>
        ))}

        <div class="about__features">
          {about.features.map((feature) => (
            <div class="about__feature">
              <Icon name={feature.icon} size={24} class="about__feature-icon" />
              <span>{feature.text}</span>
            </div>
          ))}
        </div>

        <div class="about__actions">
          <Button href={about.buttonLink || "/contact"} variant="primary">
            {about.buttonText || "Get Started Today"}
          </Button>
        </div>
      </div>

      <div class="about__images">
        <div class="about__image-grid">
          {aboutImages.map((image, index) => (
            <Image
              src={image.src}
              alt={image.alt}
              class={`about__image about__image--${index + 1}`}
              loading="lazy"
              widths={[400, 600, 800]}
              sizes="(max-width: 768px) 100vw, 50vw"
              quality={90}
              format="jpg"
            />
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .about {
    padding: var(--space-16) 0;
    background: var(--neutral-light);
  }

  .container {
    max-width: var(--container-width);
    margin: 0 auto;
    padding: 0 var(--space-4);
  }

  .about__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-12);
    align-items: center;
  }

  .about__content {
    max-width: 600px;
  }

  .about__title {
    font-size: clamp(2rem, 5vw, 2.5rem);
    font-weight: 700;
    color: var(--secondary);
    margin-bottom: var(--space-6);
    line-height: 1.2;
  }

  .about__text {
    font-size: 1.125rem;
    line-height: 1.8;
    color: var(--neutral-dark);
    margin-bottom: var(--space-4);
  }

  .about__features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-4);
    margin: var(--space-8) 0;
  }

  .about__feature {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-weight: 500;
    color: var(--secondary);
  }

  .about__feature :global(.about__feature-icon) {
    color: var(--primary);
    flex-shrink: 0;
  }

  .about__actions {
    margin-top: var(--space-6);
  }

  .about__images {
    position: relative;
  }

  .about__image-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-4);
  }

  .about__image {
    border-radius: 8px;
    width: 100%;
    height: auto;
    object-fit: cover;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .about__image--1 {
    grid-column: 1 / -1;
    max-height: 400px;
  }

  .about__image--2 {
    grid-column: 1 / -1;
    max-height: 300px;
  }

  @media (min-width: 768px) {
    .about__grid {
      grid-template-columns: 1fr 1fr;
      gap: var(--space-16);
    }

    .about__image-grid {
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(2, 200px);
    }

    .about__image--1 {
      grid-column: 1 / -1;
      grid-row: 1;
      max-height: none;
      height: 100%;
    }

    .about__image--2 {
      grid-column: 1 / -1;
      grid-row: 2;
      max-height: none;
      height: 100%;
    }
  }

  @media (min-width: 1024px) {
    .about__image-grid {
      grid-template-rows: repeat(2, 240px);
    }
  }
</style>
