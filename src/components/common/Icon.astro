---
export interface Props {
  name: string;
  size?: number;
  weight?: 'thin' | 'light' | 'regular' | 'bold' | 'fill';
  color?: string;
  class?: string;
}

const { name, size = 24, weight = 'regular', color = 'currentColor', class: className = '' } = Astro.props;

// Phosphor icons use specific class names
const weightClass = weight !== 'regular' ? `-${weight}` : '';
const iconClass = `ph-${name}${weightClass}`;
---

<i 
  class={`ph ${iconClass} ${className}`} 
  style={`font-size: ${size}px; color: ${color};`}
  aria-hidden="true"
></i>

<style is:global>
  /* Load only the regular weight by default to reduce load */
  @import url('https://unpkg.com/@phosphor-icons/web@2.1.1/src/regular/style.css');
</style>

<script>
  // Load Phosphor Icons script only once
  if (typeof window !== 'undefined' && !window.PhosphorIconsLoaded) {
    const script = document.createElement('script');
    script.src = 'https://unpkg.com/@phosphor-icons/web@2.1.1';
    script.async = true;
    script.defer = true;
    document.head.appendChild(script);
    window.PhosphorIconsLoaded = true;
  }
</script>