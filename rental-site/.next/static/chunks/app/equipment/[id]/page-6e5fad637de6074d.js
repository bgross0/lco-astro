(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{2506:(e,a,s)=>{"use strict";s.d(a,{$P:()=>n,Vg:()=>l});var t=s(636);class r extends Error{constructor(e,a,s){super(e),this.status=a,this.data=s,this.name="ApiError"}}async function i(e,a){let{params:s,retries:i=3,retryDelay:l=1e3,...n}=a||{},o=new URL("".concat("https://lco.axsys.app").concat(e));s&&Object.entries(s).forEach(e=>{let[a,s]=e;null!=s&&o.searchParams.append(a,String(s))});let c={"Content-Type":"application/json",...n.headers||{}},d=t.env.ODOO_API_KEY;d&&(c["X-API-Key"]=d);let m=null;for(let e=0;e<i;e++)try{let a=await fetch(o.toString(),{...n,headers:c}),s=await a.json();if(!a.ok){if(a.status>=400&&a.status<500)throw new r(s.error||"API Error: ".concat(a.statusText),a.status,s);if(a.status>=500&&(m=new r(s.error||"Server Error: ".concat(a.statusText),a.status,s),e<i-1)){await new Promise(a=>setTimeout(a,l*Math.pow(2,e)));continue}}return s}catch(a){if(a instanceof r&&a.status&&a.status<500)throw a;if(m=a instanceof Error?a:Error("An unknown error occurred"),e<i-1){await new Promise(a=>setTimeout(a,l*Math.pow(2,e)));continue}}throw m||new r("Request failed after multiple retries")}let l=(e,a)=>i(e,{method:"GET",params:a}),n=(e,a)=>i(e,{method:"POST",body:a?JSON.stringify(a):void 0})},5038:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>h});var t=s(5155),r=s(2115),i=s(7260),l=s(1725),n=s(8743),o=s(2619),c=s.n(o),d=s(5239);let m=[{id:1,name:"Professional Snow Blower",category:"Snow Removal",description:"Heavy-duty two-stage snow blower for commercial properties",hourly_rate:45,daily_rate:150,weekly_rate:600,image_url:"/images/snow-removal/snow-removal-hero-600x300.jpg",available:!0},{id:2,name:"CAT 299D3 Skid Steer",category:"Snow Removal",description:"Compact track loader with snow attachments",hourly_rate:125,daily_rate:450,weekly_rate:1800,image_url:"/images/snow-removal/cat-299d3-snow.jpg",available:!0},{id:3,name:"Commercial Zero-Turn Mower",category:"Lawn Care",description:'60" deck commercial-grade zero-turn mower',hourly_rate:35,daily_rate:120,weekly_rate:450,image_url:"/images/equipment/equipment-2-600x616.jpg",available:!0},{id:4,name:"String Trimmer",category:"Lawn Care",description:"Professional gas trimmer",hourly_rate:15,daily_rate:45,weekly_rate:180,image_url:"/equipment/trimmer.jpg",available:!1},{id:5,name:"Commercial Leaf Blower",category:"Landscaping",description:"Professional-grade backpack leaf blower",hourly_rate:25,daily_rate:80,weekly_rate:300,image_url:"/images/equipment/equipment-3-600x409.jpg",available:!0},{id:6,name:"Bobcat E35 Mini Excavator",category:"Heavy Equipment",description:"33.5 HP compact excavator for landscaping and utility work",hourly_rate:125,daily_rate:500,weekly_rate:2e3,image_url:"/images/bobcat-excavator.jpg",available:!1},{id:7,name:"Chainsaw",category:"Power Tools",description:'20" professional chainsaw',hourly_rate:30,daily_rate:90,weekly_rate:350,image_url:"/equipment/chainsaw.jpg",available:!0},{id:8,name:"Core Aerator",category:"Lawn Care",description:"Walk-behind core aerator for lawn restoration",hourly_rate:40,daily_rate:130,weekly_rate:500,image_url:"/images/equipment/equipment-4-600x389.jpg",available:!0},{id:9,name:"Commercial Pressure Washer",category:"Power Tools",description:"4000 PSI hot water pressure washer",hourly_rate:35,daily_rate:100,weekly_rate:400,image_url:"/images/equipment/equipment-5-600x451.jpg",available:!0},{id:10,name:"Hedge Trimmer",category:"Landscaping",description:"Professional gas hedge trimmer",hourly_rate:20,daily_rate:60,weekly_rate:240,image_url:"/equipment/hedge-trimmer.jpg",available:!0}];m.slice(0,4);var u=s(8653),x=s(9774);function h(){var e;let a=(0,i.useParams)().id,[s,o]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[g,b]=(0,r.useState)(!0),[f,y]=(0,r.useState)(0),[j,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[_,k]=(0,r.useState)(null),[S,E]=(0,r.useState)(!1),[q,T]=(0,r.useState)(null),[C,P]=(0,r.useState)(!1),[D,A]=(0,r.useState)({name:"",email:"",phone:"",message:""}),[L,B]=(0,r.useState)("idle"),[$,O]=(0,r.useState)("");(0,r.useEffect)(()=>{!async function(){b(!0);try{let e=await (0,x.nB)(Number(a));p(e);let s=(0,x.cA)(e);o(s)}catch(s){console.log("API not available, using mock data");let e=m.find(e=>e.id===Number(a));e&&o(e)}finally{b(!1)}}()},[a]),(0,r.useEffect)(()=>{j&&N&&h&&H()},[j,N]);let H=async()=>{if(j&&N&&h){E(!0),k(null),T(null);try{let e=await (0,u.q0)({vehicle_id:h.id,date_from:j,date_to:N});k(e.available),T(e.estimated_price)}catch(e){console.error("Error checking availability:",e),k(!0),s&&T(Math.ceil((new Date(N).getTime()-new Date(j).getTime())/864e5)*s.daily_rate)}finally{E(!1)}}},I=async e=>{if(e.preventDefault(),!h||!j||!N)return void O("Please select dates first");B("submitting"),O("");try{await (0,u.sH)({vehicle_id:h.id,customer_name:D.name,customer_email:D.email,customer_phone:D.phone,date_from:j,date_to:N,booking_type:"reservation",message:D.message}),B("success"),setTimeout(()=>{P(!1),B("idle"),A({name:"",email:"",phone:"",message:""})},3e3)}catch(e){B("error"),O(e.message||"Failed to create booking")}};if(g)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.default,{}),(0,t.jsx)("main",{className:"section-padding",children:(0,t.jsx)("div",{className:"container-custom",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-xl text-neutral-medium",children:"Loading equipment details..."})})})}),(0,t.jsx)(n.A,{})]});if(!s)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.default,{}),(0,t.jsx)("main",{className:"section-padding",children:(0,t.jsx)("div",{className:"container-custom",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Equipment Not Found"}),(0,t.jsx)("p",{className:"text-xl text-neutral-medium mb-8",children:"The equipment you're looking for doesn't exist or has been removed."}),(0,t.jsx)(c(),{href:"/equipment",className:"btn btn-primary",children:"Browse All Equipment"})]})})}),(0,t.jsx)(n.A,{})]});let F=(null==h?void 0:h.images)||[{url:s.image_url,name:s.name}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.default,{}),(0,t.jsxs)("main",{children:[(0,t.jsx)("section",{className:"bg-gray-50 py-4",children:(0,t.jsx)("div",{className:"container-custom",children:(0,t.jsxs)("nav",{className:"text-sm",children:[(0,t.jsx)(c(),{href:"/",className:"text-neutral-medium hover:text-primary",children:"Home"}),(0,t.jsx)("span",{className:"mx-2",children:"/"}),(0,t.jsx)(c(),{href:"/equipment",className:"text-neutral-medium hover:text-primary",children:"Equipment"}),(0,t.jsx)("span",{className:"mx-2",children:"/"}),(0,t.jsx)("span",{className:"text-neutral-dark",children:s.name})]})})}),(0,t.jsx)("section",{className:"section-padding",children:(0,t.jsx)("div",{className:"container-custom",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"relative h-96 bg-gray-100 rounded-xl overflow-hidden mb-4",children:(null==(e=F[f])?void 0:e.url)?(0,t.jsx)(d.default,{src:F[f].url,alt:s.name,fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-6xl",children:"\uD83D\uDD27"})})}),F.length>1&&(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:F.map((e,a)=>(0,t.jsx)("button",{onClick:()=>y(a),className:"relative h-20 bg-gray-100 rounded-lg overflow-hidden ".concat(f===a?"ring-2 ring-primary":""),children:e.url?(0,t.jsx)(d.default,{src:e.url,alt:"".concat(s.name," ").concat(a+1),fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-200"})},a))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("p",{className:"text-primary font-semibold mb-2",children:s.category}),(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4",children:s.name}),(s.description||(null==h?void 0:h.short_description))&&(0,t.jsx)("p",{className:"text-lg text-neutral-medium mb-6",children:s.description||(null==h?void 0:h.short_description)}),(null==h?void 0:h.full_description)&&(0,t.jsx)("div",{className:"prose prose-lg max-w-none mb-6",children:(0,t.jsx)("p",{children:h.full_description})})]}),(0,t.jsxs)("div",{className:"card p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Rental Rates"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-neutral-medium",children:"Hourly:"}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["$",s.hourly_rate]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-neutral-medium",children:"Daily:"}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["$",s.daily_rate]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-neutral-medium",children:"Weekly:"}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["$",s.weekly_rate]})]}),(null==h?void 0:h.rental_price_monthly)&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-neutral-medium",children:"Monthly:"}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:["$",h.rental_price_monthly]})]})]})]}),(0,t.jsxs)("div",{className:"card p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Check Availability"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:j,onChange:e=>v(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:N,onChange:e=>w(e.target.value),min:j||new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),S&&(0,t.jsx)("p",{className:"text-neutral-medium",children:"Checking availability..."}),null!==_&&!S&&(0,t.jsx)("div",{className:"p-4 rounded-lg mb-4 ".concat(_?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"font-semibold",children:"✓ Available for these dates!"}),q&&(0,t.jsxs)("p",{className:"mt-2",children:["Estimated Total: ",(0,t.jsxs)("span",{className:"font-bold",children:["$",q]})]})]}):(0,t.jsx)("p",{className:"font-semibold",children:"✗ Not available for these dates"})}),(0,t.jsx)("button",{onClick:()=>P(!0),disabled:!_||!j||!N,className:"w-full btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:j&&N?_?"Book Now":"Not Available":"Select Dates to Book"})]}),(null==h?void 0:h.specifications)&&(0,t.jsxs)("div",{className:"card p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Specifications"}),(0,t.jsx)("dl",{className:"grid grid-cols-2 gap-4",children:Object.entries(h.specifications).map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm text-neutral-medium",children:a}),(0,t.jsx)("dd",{className:"font-semibold",children:String(s)})]},a)})})]})]})]})})}),(0,t.jsx)("section",{className:"section-padding bg-gray-50",children:(0,t.jsxs)("div",{className:"container-custom",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"Related Equipment"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.filter(e=>e.category===s.category&&e.id!==s.id).slice(0,3).map(e=>(0,t.jsxs)(c(),{href:"/equipment/".concat(e.id),className:"card group",children:[(0,t.jsx)("div",{className:"relative h-48 bg-gray-100 overflow-hidden",children:e.image_url?(0,t.jsx)(d.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110"}):(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-4xl",children:"\uD83D\uDD27"})})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-neutral-medium",children:["From $",e.daily_rate,"/day"]})]})]},e.id))})]})})]}),C&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Complete Your Booking"}),"success"===L?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-green-500 text-5xl mb-4",children:"✓"}),(0,t.jsx)("p",{className:"text-xl font-semibold mb-2",children:"Booking Confirmed!"}),(0,t.jsx)("p",{className:"text-neutral-medium",children:"We'll contact you shortly with details."})]}):(0,t.jsxs)("form",{onSubmit:I,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("p",{className:"text-sm text-neutral-medium mb-2",children:["Booking: ",(0,t.jsx)("strong",{children:s.name})]}),(0,t.jsxs)("p",{className:"text-sm text-neutral-medium",children:["Dates: ",j," to ",N]}),q&&(0,t.jsxs)("p",{className:"text-sm text-neutral-medium",children:["Total: ",(0,t.jsxs)("strong",{children:["$",q]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Full Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:D.name,onChange:e=>A({...D,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Email *"}),(0,t.jsx)("input",{type:"email",required:!0,value:D.email,onChange:e=>A({...D,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Phone *"}),(0,t.jsx)("input",{type:"tel",required:!0,value:D.phone,onChange:e=>A({...D,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Additional Notes"}),(0,t.jsx)("textarea",{value:D.message,onChange:e=>A({...D,message:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),$&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-red-50 text-red-800 rounded-lg text-sm",children:$}),(0,t.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>P(!1),className:"flex-1 btn btn-outline",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:"submitting"===L,className:"flex-1 btn btn-primary",children:"submitting"===L?"Submitting...":"Confirm Booking"})]})]})]})}),(0,t.jsx)(n.A,{})]})}},5241:(e,a,s)=>{Promise.resolve().then(s.bind(s,5038))},8653:(e,a,s)=>{"use strict";s.d(a,{q0:()=>r,sH:()=>i});var t=s(2506);async function r(e){try{let a=await (0,t.$P)("/api/fleet/availability",e);if(void 0!==a.success)return a;return{success:!0,...a}}catch(a){return console.error("Availability check failed:",a),{success:!1,available:!1,vehicle_id:e.vehicle_id,days:0,estimated_price:0,daily_rate:0,currency:"USD"}}}async function i(e){let a=new Date(e.date_from),s=new Date(e.date_to),r=new Date;if(r.setHours(0,0,0,0),a>=s)throw Error("End date must be after start date");if(a<r)throw Error("Start date cannot be in the past");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.customer_email))throw Error("Invalid email address");if(!/^[\d\s\-\+\(\)]+$/.test(e.customer_phone))throw Error("Invalid phone number");try{let a=await (0,t.$P)("/api/fleet/booking",e);if(void 0!==a.success)return a;return{success:!0,...a}}catch(e){if(409===e.status){var i;throw Error((null==(i=e.data)?void 0:i.message)||"This vehicle is not available for the selected dates")}throw e}}},9774:(e,a,s)=>{"use strict";s.d(a,{cA:()=>l,nB:()=>i,pk:()=>r});var t=s(2506);async function r(e){let a=await (0,t.Vg)("/api/fleet/vehicles",e);return a.success&&a.data?a:{success:!1,data:[],pagination:{total:0,limit:(null==e?void 0:e.limit)||20,offset:(null==e?void 0:e.offset)||0,has_more:!1}}}async function i(e){let a=await (0,t.Vg)("/api/fleet/vehicle/".concat(e));if(!a.success||!a.data)throw Error("Equipment not found");return a.data}function l(e){let a;a=e.primary_image?e.primary_image.startsWith("http")?e.primary_image:"https://lco.axsys.app".concat(e.primary_image):"/images/equipment/equipment-hero-600x300.jpg";let s="Equipment";if(e.category)s=({skidsteer:"Skid Steers",skid_steer:"Skid Steers",excavator:"Excavators",mini_excavator:"Excavators",trailer:"Trailers",dump_trailer:"Trailers",equipment_trailer:"Trailers",loader:"Loaders",wheel_loader:"Loaders",backhoe:"Loaders",power_tool:"Power Tools",chainsaw:"Power Tools",generator:"Power Tools",compressor:"Power Tools"})[e.category.toLowerCase()]||"Skid Steers";else if(e.name){let a=e.name.toLowerCase();a.includes("cat")||a.includes("skid")?s="Skid Steers":a.includes("excavator")||a.includes("mini ex")?s="Excavators":a.includes("trailer")?s="Trailers":a.includes("loader")||a.includes("backhoe")?s="Loaders":(a.includes("chainsaw")||a.includes("generator")||a.includes("compressor")||a.includes("tool"))&&(s="Power Tools")}return{id:e.id,name:e.name||"Equipment",category:s,description:"",hourly_rate:Math.round(e.rental_price_daily/8),daily_rate:e.rental_price_daily||0,weekly_rate:e.rental_price_weekly||5*e.rental_price_daily,available:"available"===e.availability_status,image_url:a}}}},e=>{e.O(0,[481,67,441,255,358],()=>e(e.s=5241)),_N_E=e.O()}]);