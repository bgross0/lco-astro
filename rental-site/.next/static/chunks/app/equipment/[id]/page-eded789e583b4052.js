(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{63:(e,a,t)=>{"use strict";var s=t(7260);t.o(s,"notFound")&&t.d(a,{notFound:function(){return s.notFound}}),t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}})},125:(e,a,t)=>{"use strict";t.d(a,{$P:()=>n,Vg:()=>l,uE:()=>i});var s=t(636);class r extends Error{constructor(e,a,t){super(e),this.status=a,this.data=t,this.name="ApiError"}}async function i(e,a){let{params:t,retries:i=3,retryDelay:l=1e3,...n}=a||{},o=new URL("".concat("https://lco.axsys.app").concat(e));t&&Object.entries(t).forEach(e=>{let[a,t]=e;null!=t&&o.searchParams.append(a,String(t))});let c={"Content-Type":"application/json",...n.headers||{}},d=s.env.ODOO_API_KEY;d&&(c["X-API-Key"]=d);let m=null;for(let e=0;e<i;e++)try{let a=await fetch(o.toString(),{...n,headers:c}),t=await a.json();if(!a.ok){if(a.status>=400&&a.status<500)throw new r(t.error||"API Error: ".concat(a.statusText),a.status,t);if(a.status>=500&&(m=new r(t.error||"Server Error: ".concat(a.statusText),a.status,t),e<i-1)){await new Promise(a=>setTimeout(a,l*Math.pow(2,e)));continue}}return t}catch(a){if(a instanceof r&&a.status&&a.status<500)throw a;if(m=a instanceof Error?a:Error("An unknown error occurred"),e<i-1){await new Promise(a=>setTimeout(a,l*Math.pow(2,e)));continue}}throw m||new r("Request failed after multiple retries")}let l=(e,a)=>i(e,{method:"GET",params:a}),n=(e,a)=>i(e,{method:"POST",body:a?JSON.stringify(a):void 0})},5241:(e,a,t)=>{Promise.resolve().then(t.bind(t,9443))},8653:(e,a,t)=>{"use strict";t.d(a,{q0:()=>r,sH:()=>i});var s=t(125);async function r(e){try{let a=await (0,s.$P)("/api/fleet/availability",e);if(void 0!==a.success)return a;return{success:!0,...a}}catch(a){return console.error("Availability check failed:",a),{success:!1,available:!1,vehicle_id:e.vehicle_id,days:0,estimated_price:0,daily_rate:0,currency:"USD"}}}async function i(e){let a=new Date(e.date_from),t=new Date(e.date_to),r=new Date;if(r.setHours(0,0,0,0),a>=t)throw Error("End date must be after start date");if(a<r)throw Error("Start date cannot be in the past");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.customer_email))throw Error("Invalid email address");if(!/^[\d\s\-\+\(\)]+$/.test(e.customer_phone))throw Error("Invalid phone number");try{let a=await (0,s.uE)("/api/fleet/booking",{method:"POST",body:JSON.stringify(e),retries:1});if(void 0!==a.success)return a;return{success:!0,...a}}catch(e){if(409===e.status){var i;throw Error((null==(i=e.data)?void 0:i.message)||"This vehicle is not available for the selected dates")}throw e}}},9443:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var s=t(5155),r=t(2115),i=t(63),l=t(1725),n=t(8743),o=t(2619),c=t.n(o),d=t(5239);let m=[{id:1,name:"Professional Snow Blower",category:"Snow Removal",description:"Heavy-duty two-stage snow blower for commercial properties",hourly_rate:45,daily_rate:150,weekly_rate:600,image_url:"/images/snow-removal/snow-removal-hero-600x300.jpg",available:!0},{id:2,name:"CAT 299D3 Skid Steer",category:"Snow Removal",description:"Compact track loader with snow attachments",hourly_rate:125,daily_rate:450,weekly_rate:1800,image_url:"/images/snow-removal/cat-299d3-snow.jpg",available:!0},{id:3,name:"Commercial Zero-Turn Mower",category:"Lawn Care",description:'60" deck commercial-grade zero-turn mower',hourly_rate:35,daily_rate:120,weekly_rate:450,image_url:"/images/equipment/equipment-2-600x616.jpg",available:!0},{id:4,name:"String Trimmer",category:"Lawn Care",description:"Professional gas trimmer",hourly_rate:15,daily_rate:45,weekly_rate:180,image_url:"/equipment/trimmer.jpg",available:!1},{id:5,name:"Commercial Leaf Blower",category:"Landscaping",description:"Professional-grade backpack leaf blower",hourly_rate:25,daily_rate:80,weekly_rate:300,image_url:"/images/equipment/equipment-3-600x409.jpg",available:!0},{id:6,name:"Bobcat E35 Mini Excavator",category:"Heavy Equipment",description:"33.5 HP compact excavator for landscaping and utility work",hourly_rate:125,daily_rate:500,weekly_rate:2e3,image_url:"/images/bobcat-excavator.jpg",available:!1},{id:7,name:"Chainsaw",category:"Power Tools",description:'20" professional chainsaw',hourly_rate:30,daily_rate:90,weekly_rate:350,image_url:"/equipment/chainsaw.jpg",available:!0},{id:8,name:"Core Aerator",category:"Lawn Care",description:"Walk-behind core aerator for lawn restoration",hourly_rate:40,daily_rate:130,weekly_rate:500,image_url:"/images/equipment/equipment-4-600x389.jpg",available:!0},{id:9,name:"Commercial Pressure Washer",category:"Power Tools",description:"4000 PSI hot water pressure washer",hourly_rate:35,daily_rate:100,weekly_rate:400,image_url:"/images/equipment/equipment-5-600x451.jpg",available:!0},{id:10,name:"Hedge Trimmer",category:"Landscaping",description:"Professional gas hedge trimmer",hourly_rate:20,daily_rate:60,weekly_rate:240,image_url:"/equipment/hedge-trimmer.jpg",available:!0}];m.slice(0,4);var u=t(8653),h=t(9774);function x(){var e;let a=(0,i.useParams)().id,t=(0,r.useRef)(!1),o=(0,r.useRef)(""),[x,p]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[b,y]=(0,r.useState)(!0),[v,j]=(0,r.useState)(0),[w,N]=(0,r.useState)(""),[_,k]=(0,r.useState)(""),[S,E]=(0,r.useState)(null),[T,P]=(0,r.useState)(!1),[q,C]=(0,r.useState)(null),[D,A]=(0,r.useState)(!1),[L,O]=(0,r.useState)({name:"",email:"",phone:"",message:""}),[B,F]=(0,r.useState)("idle"),[$,H]=(0,r.useState)("");(0,r.useEffect)(()=>{!async function(){y(!0);try{let e=await (0,h.nB)(Number(a));f(e);let t=(0,h.cA)(e);p(t)}catch(t){console.log("API not available, using mock data");let e=m.find(e=>e.id===Number(a));e&&p(e)}finally{y(!1)}}()},[a]),(0,r.useEffect)(()=>{w&&_&&g&&I()},[w,_,g]);let I=async()=>{if(w&&_&&g){P(!0),E(null),C(null);try{let e=await (0,u.q0)({vehicle_id:g.id,date_from:w,date_to:_});E(e.available),C(e.estimated_price)}catch(e){console.error("Error checking availability:",e),E(!0),x&&C(Math.ceil((new Date(_).getTime()-new Date(w).getTime())/864e5)*x.daily_rate)}finally{P(!1)}}},R=async e=>{if(e.preventDefault(),t.current)return void console.log("Booking already in progress, ignoring duplicate submission");if(!g||!w||!_)return void H("Please select dates first");let a="".concat(g.id,"-").concat(w,"-").concat(_,"-").concat(L.email);if(o.current===a)return void console.log("Duplicate booking detected, ignoring");t.current=!0,o.current=a,F("submitting"),H("");try{await (0,u.sH)({vehicle_id:g.id,customer_name:L.name,customer_email:L.email,customer_phone:L.phone,date_from:w,date_to:_,booking_type:"reservation",message:L.message}),F("success"),setTimeout(()=>{A(!1),F("idle"),O({name:"",email:"",phone:"",message:""}),o.current=""},3e3)}catch(e){F("error"),H(e.message||"Failed to create booking"),setTimeout(()=>{o.current=""},2e3)}finally{t.current=!1}};if(b)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.default,{}),(0,s.jsx)("main",{className:"section-padding",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-xl text-neutral-medium",children:"Loading equipment details..."})})})}),(0,s.jsx)(n.A,{})]});if(!x)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.default,{}),(0,s.jsx)("main",{className:"section-padding",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Equipment Not Found"}),(0,s.jsx)("p",{className:"text-xl text-neutral-medium mb-8",children:"The equipment you're looking for doesn't exist or has been removed."}),(0,s.jsx)(c(),{href:"/equipment",className:"btn btn-primary",children:"Browse All Equipment"})]})})}),(0,s.jsx)(n.A,{})]});let M=(null==g?void 0:g.images)||[{url:x.image_url,name:x.name}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.default,{}),(0,s.jsxs)("main",{children:[(0,s.jsx)("section",{className:"bg-gray-50 py-4",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsxs)("nav",{className:"text-sm",children:[(0,s.jsx)(c(),{href:"/",className:"text-neutral-medium hover:text-primary",children:"Home"}),(0,s.jsx)("span",{className:"mx-2",children:"/"}),(0,s.jsx)(c(),{href:"/equipment",className:"text-neutral-medium hover:text-primary",children:"Equipment"}),(0,s.jsx)("span",{className:"mx-2",children:"/"}),(0,s.jsx)("span",{className:"text-neutral-dark",children:x.name})]})})}),(0,s.jsx)("section",{className:"section-padding",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"relative h-96 bg-gray-100 rounded-xl overflow-hidden mb-4",children:(null==(e=M[v])?void 0:e.url)?(0,s.jsx)(d.default,{src:M[v].url,alt:x.name,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-6xl",children:"\uD83D\uDD27"})})}),M.length>1&&(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:M.map((e,a)=>(0,s.jsx)("button",{onClick:()=>j(a),className:"relative h-20 bg-gray-100 rounded-lg overflow-hidden ".concat(v===a?"ring-2 ring-primary":""),children:e.url?(0,s.jsx)(d.default,{src:e.url,alt:"".concat(x.name," ").concat(a+1),fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-200"})},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("p",{className:"text-primary font-semibold mb-2",children:x.category}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:x.name}),(x.description||(null==g?void 0:g.short_description))&&(0,s.jsx)("p",{className:"text-lg text-neutral-medium mb-6",children:x.description||(null==g?void 0:g.short_description)}),(null==g?void 0:g.full_description)&&(0,s.jsx)("div",{className:"prose prose-lg max-w-none mb-6",children:(0,s.jsx)("p",{children:g.full_description})})]}),(0,s.jsxs)("div",{className:"card p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Rental Rates"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-medium",children:"Hourly:"}),(0,s.jsxs)("span",{className:"font-bold text-lg",children:["$",x.hourly_rate]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-medium",children:"Daily:"}),(0,s.jsxs)("span",{className:"font-bold text-lg",children:["$",x.daily_rate]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-medium",children:"Weekly:"}),(0,s.jsxs)("span",{className:"font-bold text-lg",children:["$",x.weekly_rate]})]}),(null==g?void 0:g.rental_price_monthly)&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-medium",children:"Monthly:"}),(0,s.jsxs)("span",{className:"font-bold text-lg",children:["$",g.rental_price_monthly]})]})]})]}),(0,s.jsxs)("div",{className:"card p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Check Availability"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:w,onChange:e=>N(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:_,onChange:e=>k(e.target.value),min:w||new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),T&&(0,s.jsx)("p",{className:"text-neutral-medium",children:"Checking availability..."}),null!==S&&!T&&(0,s.jsx)("div",{className:"p-4 rounded-lg mb-4 ".concat(S?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-semibold",children:"✓ Available for these dates!"}),q&&(0,s.jsxs)("p",{className:"mt-2",children:["Estimated Total: ",(0,s.jsxs)("span",{className:"font-bold",children:["$",q]})]})]}):(0,s.jsx)("p",{className:"font-semibold",children:"✗ Not available for these dates"})}),(0,s.jsx)("button",{onClick:()=>A(!0),disabled:!S||!w||!_,className:"w-full btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:w&&_?S?"Book Now":"Not Available":"Select Dates to Book"})]}),(null==g?void 0:g.specifications)&&(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Specifications"}),(0,s.jsx)("dl",{className:"grid grid-cols-2 gap-4",children:Object.entries(g.specifications).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"text-sm text-neutral-medium",children:a}),(0,s.jsx)("dd",{className:"font-semibold",children:String(t)})]},a)})})]})]})]})})}),(0,s.jsx)("section",{className:"section-padding bg-gray-50",children:(0,s.jsxs)("div",{className:"container-custom",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"Related Equipment"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.filter(e=>e.category===x.category&&e.id!==x.id).slice(0,3).map(e=>(0,s.jsxs)(c(),{href:"/equipment/".concat(e.id),className:"card group",children:[(0,s.jsx)("div",{className:"relative h-48 bg-gray-100 overflow-hidden",children:e.image_url?(0,s.jsx)(d.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110"}):(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-4xl",children:"\uD83D\uDD27"})})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-neutral-medium",children:["From $",e.daily_rate,"/day"]})]})]},e.id))})]})})]}),D&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Complete Your Booking"}),"success"===B?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"text-green-500 text-5xl mb-4",children:"✓"}),(0,s.jsx)("p",{className:"text-xl font-semibold mb-2",children:"Booking Confirmed!"}),(0,s.jsx)("p",{className:"text-neutral-medium",children:"We'll contact you shortly with details."})]}):(0,s.jsxs)("form",{onSubmit:R,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("p",{className:"text-sm text-neutral-medium mb-2",children:["Booking: ",(0,s.jsx)("strong",{children:x.name})]}),(0,s.jsxs)("p",{className:"text-sm text-neutral-medium",children:["Dates: ",w," to ",_]}),q&&(0,s.jsxs)("p",{className:"text-sm text-neutral-medium",children:["Total: ",(0,s.jsxs)("strong",{children:["$",q]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:L.name,onChange:e=>O({...L,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Email *"}),(0,s.jsx)("input",{type:"email",required:!0,value:L.email,onChange:e=>O({...L,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Phone *"}),(0,s.jsx)("input",{type:"tel",required:!0,value:L.phone,onChange:e=>O({...L,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Additional Notes"}),(0,s.jsx)("textarea",{value:L.message,onChange:e=>O({...L,message:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),$&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-red-50 text-red-800 rounded-lg text-sm",children:$}),(0,s.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>A(!1),className:"flex-1 btn btn-outline",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:"submitting"===B,className:"flex-1 btn btn-primary",children:"submitting"===B?"Submitting...":"Confirm Booking"})]})]})]})}),(0,s.jsx)(n.A,{})]})}},9774:(e,a,t)=>{"use strict";t.d(a,{cA:()=>l,nB:()=>i,pk:()=>r});var s=t(125);async function r(e){let a=await (0,s.Vg)("/api/fleet/vehicles",e);return a.success&&a.data?a:{success:!1,data:[],pagination:{total:0,limit:(null==e?void 0:e.limit)||20,offset:(null==e?void 0:e.offset)||0,has_more:!1}}}async function i(e){let a=await (0,s.Vg)("/api/fleet/vehicle/".concat(e));if(!a.success||!a.data)throw Error("Equipment not found");return a.data}function l(e){let a;a=e.primary_image&&e.primary_image.startsWith("http")?e.primary_image:"/web/image/fleet.vehicle/".concat(e.id,"/image_1920");let t="Equipment";if(e.category){console.log("Odoo category value:",e.category,"for vehicle:",e.name);let a={skidsteer:"Skid Steers",skid_steer:"Skid Steers","skid steer":"Skid Steers","skid steers":"Skid Steers",excavator:"Excavators",excavators:"Excavators",mini_excavator:"Excavators","mini excavator":"Excavators",trailer:"Trailers",trailers:"Trailers",dump_trailer:"Trailers","dump trailer":"Trailers",equipment_trailer:"Trailers","equipment trailer":"Trailers",loader:"Loaders",loaders:"Loaders",wheel_loader:"Loaders","wheel loader":"Loaders",backhoe:"Loaders",power_tool:"Power Tools","power tool":"Power Tools","power tools":"Power Tools",chainsaw:"Power Tools",generator:"Power Tools",compressor:"Power Tools",attachment:"Attachments",attachments:"Attachments"}[e.category.toLowerCase()];a?t=a:console.warn("Unknown category '".concat(e.category,"' for vehicle '").concat(e.name,"', using default 'Equipment'"))}else if(e.name){let a=e.name.toLowerCase();a.includes("cat")||a.includes("skid")?t="Skid Steers":a.includes("excavator")||a.includes("mini ex")?t="Excavators":a.includes("trailer")?t="Trailers":a.includes("loader")||a.includes("backhoe")?t="Loaders":(a.includes("chainsaw")||a.includes("generator")||a.includes("compressor")||a.includes("tool"))&&(t="Power Tools")}return{id:e.id,name:e.name||"Equipment",category:t,description:"",hourly_rate:Math.round(e.rental_price_daily/8),daily_rate:e.rental_price_daily||0,weekly_rate:e.rental_price_weekly||5*e.rental_price_daily,available:"available"===e.availability_status,image_url:a}}}},e=>{e.O(0,[619,239,67,441,255,358],()=>e(e.s=5241)),_N_E=e.O()}]);